<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Savings Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Calendar, DollarSign, Target, TrendingUp, Calculator, Edit3, Save, X } = lucide;

        const CarSavingsTracker = () => {
            const [currentBalance, setCurrentBalance] = useState(() => {
                const saved = localStorage.getItem('carSavingsBalance');
                return saved ? parseFloat(saved) : 7000;
            });
            const [targetGoal] = useState(16000);
            const [weeklyInvestments, setWeeklyInvestments] = useState(() => {
                const saved = localStorage.getItem('weeklyInvestments');
                return saved ? parseFloat(saved) : 150;
            });
            const [monthlyExpenses, setMonthlyExpenses] = useState(() => {
                const saved = localStorage.getItem('monthlyExpenses');
                return saved ? parseFloat(saved) : 325;
            });
            const [isFullTime, setIsFullTime] = useState(() => {
                const saved = localStorage.getItem('isFullTime');
                return saved ? JSON.parse(saved) : true;
            });
            const [transactions, setTransactions] = useState(() => {
                const saved = localStorage.getItem('transactions');
                return saved ? JSON.parse(saved) : [
                    { id: 1, date: '2025-06-15', amount: 7000, type: 'initial', description: 'Starting Balance' }
                ];
            });
            const [newTransaction, setNewTransaction] = useState({ amount: '', description: '', type: 'deposit' });
            const [showAddTransaction, setShowAddTransaction] = useState(false);
            const [editingSettings, setEditingSettings] = useState(false);
            const [tempSettings, setTempSettings] = useState({
                weeklyInvestments: 150,
                monthlyExpenses: 325
            });

            // Save to localStorage whenever values change
            useEffect(() => {
                localStorage.setItem('carSavingsBalance', currentBalance.toString());
            }, [currentBalance]);

            useEffect(() => {
                localStorage.setItem('weeklyInvestments', weeklyInvestments.toString());
            }, [weeklyInvestments]);

            useEffect(() => {
                localStorage.setItem('monthlyExpenses', monthlyExpenses.toString());
            }, [monthlyExpenses]);

            useEffect(() => {
                localStorage.setItem('isFullTime', JSON.stringify(isFullTime));
            }, [isFullTime]);

            useEffect(() => {
                localStorage.setItem('transactions', JSON.stringify(transactions));
            }, [transactions]);

            // Calculate projected timeline
            const calculateProjection = () => {
                const remaining = targetGoal - currentBalance;
                const weeklyExpenses = monthlyExpenses / 4.33;
                
                if (isFullTime) {
                    const weeklyCarSavings = 900 - weeklyExpenses - weeklyInvestments;
                    const weeksToGoal = Math.ceil(remaining / weeklyCarSavings);
                    const targetDate = new Date();
                    targetDate.setDate(targetDate.getDate() + (weeksToGoal * 7));
                    return { weeksToGoal, targetDate, weeklyCarSavings };
                } else {
                    const weeklyCarSavings = 548.50 - weeklyExpenses - weeklyInvestments;
                    const weeksToGoal = Math.ceil(remaining / weeklyCarSavings);
                    const targetDate = new Date();
                    targetDate.setDate(targetDate.getDate() + (weeksToGoal * 7));
                    return { weeksToGoal, targetDate, weeklyCarSavings };
                }
            };

            const projection = calculateProjection();
            const progressPercentage = (currentBalance / targetGoal) * 100;

            const addTransaction = () => {
                if (!newTransaction.amount || !newTransaction.description) return;
                
                const transaction = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    amount: parseFloat(newTransaction.amount),
                    type: newTransaction.type,
                    description: newTransaction.description
                };
                
                setTransactions([...transactions, transaction]);
                
                if (newTransaction.type === 'deposit') {
                    setCurrentBalance(prev => prev + transaction.amount);
                } else {
                    setCurrentBalance(prev => prev - transaction.amount);
                }
                
                setNewTransaction({ amount: '', description: '', type: 'deposit' });
                setShowAddTransaction(false);
            };

            const saveSettings = () => {
                setWeeklyInvestments(tempSettings.weeklyInvestments);
                setMonthlyExpenses(tempSettings.monthlyExpenses);
                setEditingSettings(false);
            };

            const cancelSettings = () => {
                setTempSettings({
                    weeklyInvestments,
                    monthlyExpenses
                });
                setEditingSettings(false);
            };

            return React.createElement('div', { className: "max-w-6xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8" },
                    React.createElement('div', { className: "flex items-center justify-between mb-8" },
                        React.createElement('div', { className: "flex items-center gap-3" },
                            React.createElement('div', { className: "p-3 bg-blue-500 rounded-full" },
                                React.createElement(DollarSign, { className: "h-6 w-6 text-white" })
                            ),
                            React.createElement('div', null,
                                React.createElement('h1', { className: "text-3xl font-bold text-gray-800" }, "Car Savings Tracker"),
                                React.createElement('p', { className: "text-gray-600" }, "Track your progress toward your $16,000 car goal")
                            )
                        ),
                        React.createElement('div', { className: "flex items-center gap-2" },
                            React.createElement('button', {
                                onClick: () => setIsFullTime(!isFullTime),
                                className: `px-4 py-2 rounded-lg font-medium transition-colors ${
                                    isFullTime 
                                        ? 'bg-green-500 text-white' 
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`
                            }, isFullTime ? 'Full-Time Mode' : 'Part-Time Mode')
                        )
                    ),

                    // Progress Cards
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" },
                        React.createElement('div', { className: "bg-gradient-to-r from-green-400 to-green-600 rounded-xl p-6 text-white" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-green-100" }, "Current Balance"),
                                    React.createElement('p', { className: "text-3xl font-bold" }, `$${currentBalance.toLocaleString()}`)
                                ),
                                React.createElement(Target, { className: "h-8 w-8 text-green-200" })
                            )
                        ),
                        React.createElement('div', { className: "bg-gradient-to-r from-blue-400 to-blue-600 rounded-xl p-6 text-white" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-blue-100" }, "Goal"),
                                    React.createElement('p', { className: "text-3xl font-bold" }, `$${targetGoal.toLocaleString()}`)
                                ),
                                React.createElement(TrendingUp, { className: "h-8 w-8 text-blue-200" })
                            )
                        ),
                        React.createElement('div', { className: "bg-gradient-to-r from-purple-400 to-purple-600 rounded-xl p-6 text-white" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-purple-100" }, "Remaining"),
                                    React.createElement('p', { className: "text-3xl font-bold" }, `$${(targetGoal - currentBalance).toLocaleString()}`)
                                ),
                                React.createElement(Calculator, { className: "h-8 w-8 text-purple-200" })
                            )
                        )
                    ),

                    // Progress Bar
                    React.createElement('div', { className: "mb-8" },
                        React.createElement('div', { className: "flex justify-between items-center mb-2" },
                            React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "Progress to Goal"),
                            React.createElement('span', { className: "text-sm font-medium text-gray-700" }, `${progressPercentage.toFixed(1)}%`)
                        ),
                        React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-4" },
                            React.createElement('div', { 
                                className: "bg-gradient-to-r from-green-400 to-blue-500 h-4 rounded-full transition-all duration-500",
                                style: { width: `${Math.min(progressPercentage, 100)}%` }
                            })
                        )
                    ),

                    // Projection and Settings
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-8" },
                        React.createElement('div', { className: "bg-gray-50 rounded-xl p-6" },
                            React.createElement('h3', { className: "text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2" },
                                React.createElement(Calendar, { className: "h-5 w-5" }),
                                "Projection"
                            ),
                            React.createElement('div', { className: "space-y-2" },
                                React.createElement('p', { className: "text-gray-600" },
                                    React.createElement('span', { className: "font-medium" }, "Target Date: "),
                                    projection.targetDate.toLocaleDateString()
                                ),
                                React.createElement('p', { className: "text-gray-600" },
                                    React.createElement('span', { className: "font-medium" }, "Weeks to Goal: "),
                                    projection.weeksToGoal
                                ),
                                React.createElement('p', { className: "text-gray-600" },
                                    React.createElement('span', { className: "font-medium" }, "Weekly Car Savings: "),
                                    `$${projection.weeklyCarSavings.toFixed(0)}`
                                )
                            )
                        ),

                        React.createElement('div', { className: "bg-gray-50 rounded-xl p-6" },
                            React.createElement('div', { className: "flex items-center justify-between mb-4" },
                                React.createElement('h3', { className: "text-lg font-semibold text-gray-800 flex items-center gap-2" },
                                    React.createElement(Calculator, { className: "h-5 w-5" }),
                                    "Settings"
                                ),
                                !editingSettings ? 
                                    React.createElement('button', {
                                        onClick: () => {
                                            setTempSettings({
                                                weeklyInvestments,
                                                monthlyExpenses
                                            });
                                            setEditingSettings(true);
                                        },
                                        className: "p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg"
                                    }, React.createElement(Edit3, { className: "h-4 w-4" })) :
                                    React.createElement('div', { className: "flex gap-1" },
                                        React.createElement('button', {
                                            onClick: saveSettings,
                                            className: "p-2 text-green-600 hover:bg-green-100 rounded-lg"
                                        }, React.createElement(Save, { className: "h-4 w-4" })),
                                        React.createElement('button', {
                                            onClick: cancelSettings,
                                            className: "p-2 text-red-600 hover:bg-red-100 rounded-lg"
                                        }, React.createElement(X, { className: "h-4 w-4" }))
                                    )
                            ),
                            React.createElement('div', { className: "space-y-3" },
                                React.createElement('div', null,
                                    React.createElement('label', { className: "text-sm text-gray-600" }, "Weekly Investments"),
                                    editingSettings ?
                                        React.createElement('input', {
                                            type: "number",
                                            value: tempSettings.weeklyInvestments,
                                            onChange: (e) => setTempSettings(prev => ({...prev, weeklyInvestments: Number(e.target.value)})),
                                            className: "w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        }) :
                                        React.createElement('p', { className: "font-medium text-gray-800" }, `$${weeklyInvestments}`)
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "text-sm text-gray-600" }, "Monthly Expenses"),
                                    editingSettings ?
                                        React.createElement('input', {
                                            type: "number",
                                            value: tempSettings.monthlyExpenses,
                                            onChange: (e) => setTempSettings(prev => ({...prev, monthlyExpenses: Number(e.target.value)})),
                                            className: "w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        }) :
                                        React.createElement('p', { className: "font-medium text-gray-800" }, `$${monthlyExpenses}`)
                                )
                            )
                        )
                    ),

                    // Transactions
                    React.createElement('div', { className: "bg-gray-50 rounded-xl p-6" },
                        React.createElement('div', { className: "flex items-center justify-between mb-4" },
                            React.createElement('h3', { className: "text-lg font-semibold text-gray-800" }, "Transaction History"),
                            React.createElement('button', {
                                onClick: () => setShowAddTransaction(!showAddTransaction),
                                className: "px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                            }, showAddTransaction ? 'Cancel' : 'Add Transaction')
                        ),

                        showAddTransaction &&
                            React.createElement('div', { className: "bg-white rounded-lg p-4 mb-4 border border-gray-200" },
                                React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-4 gap-3" },
                                    React.createElement('input', {
                                        type: "number",
                                        placeholder: "Amount",
                                        value: newTransaction.amount,
                                        onChange: (e) => setNewTransaction(prev => ({...prev, amount: e.target.value})),
                                        className: "px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    }),
                                    React.createElement('input', {
                                        type: "text",
                                        placeholder: "Description",
                                        value: newTransaction.description,
                                        onChange: (e) => setNewTransaction(prev => ({...prev, description: e.target.value})),
                                        className: "px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    }),
                                    React.createElement('select', {
                                        value: newTransaction.type,
                                        onChange: (e) => setNewTransaction(prev => ({...prev, type: e.target.value})),
                                        className: "px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    },
                                        React.createElement('option', { value: "deposit" }, "Deposit"),
                                        React.createElement('option', { value: "expense" }, "Expense")
                                    ),
                                    React.createElement('button', {
                                        onClick: addTransaction,
                                        className: "px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                                    }, "Add")
                                )
                            ),

                        React.createElement('div', { className: "space-y-2 max-h-60 overflow-y-auto" },
                            transactions.slice().reverse().map((transaction) =>
                                React.createElement('div', { 
                                    key: transaction.id, 
                                    className: "flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200" 
                                },
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "font-medium text-gray-800" }, transaction.description),
                                        React.createElement('p', { className: "text-sm text-gray-500" }, transaction.date)
                                    ),
                                    React.createElement('div', { 
                                        className: `font-bold ${
                                            transaction.type === 'deposit' || transaction.type === 'initial' 
                                                ? 'text-green-600' 
                                                : 'text-red-600'
                                        }`
                                    },
                                        `${transaction.type === 'deposit' || transaction.type === 'initial' ? '+' : '-'}$${Math.abs(transaction.amount).toLocaleString()}`
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(CarSavingsTracker), document.getElementById('root'));
    </script>
</body>
</html>